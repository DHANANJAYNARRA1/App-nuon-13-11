generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Specialization {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  name      String   @unique @db.VarChar(60)
  active    Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("specializations")
}

model Experience {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  yearRange String   @unique @map("year_range") @db.VarChar(60)
  active    Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("experiences")
}

model Qualification {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  name      String   @unique @db.VarChar(60)
  active    Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("qualifications")
}

model State {
  id        Int      @id @default(autoincrement()) @db.UnsignedInt
  code      String   @unique @db.VarChar(5)
  name      String   @unique @db.VarChar(60)
  active    Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("states")
}


model User {
   id              BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   name            String?  @db.VarChar(60)
   email           String?  @db.VarChar(100)
   phoneNumber     String?  @db.VarChar(20) @map("phone_number")
   password        String?  @db.VarChar(255)
   active          Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
   mobile_verified Boolean  @default(dbgenerated("b'0'")) @db.Bit(1)
   role_id         BigInt   @db.UnsignedBigInt

   // Mentor fields
   isMentor          Boolean  @default(false) @map("is_mentor")
   isApproved        Boolean  @default(false) @map("is_approved")
   isProfileComplete Boolean  @default(false) @map("is_profile_complete")
   hourlyRate        Float?   @map("hourly_rate")
   specialization    String?  @db.VarChar(100)
   experience        Int?     @default(0)
   qualification     String?  @db.VarChar(255)
   registrationNumber String? @db.VarChar(100) @map("registration_number")
   department        String?  @db.VarChar(255)
   hospital          String?  @db.VarChar(255)
   bio               String?  @db.Text
   availability      String?  @db.VarChar(50)
   totalSessions     Int      @default(0) @map("total_sessions")
   rating            Float?   @default(0)
   reviewCount       Int      @default(0) @map("review_count")

   // Admin-specific fields
   adminLevel        String?  @default("standard") @db.VarChar(20) // standard, super, system
   lastLogin         DateTime? @map("last_login")
   loginAttempts     Int      @default(0) @map("login_attempts")

   // Profile fields (shared)
   city              String?  @db.VarChar(50)
   location          String?  @db.VarChar(100)
   profilePicture    String?  @db.VarChar(255)

   // App-specific fields
   deviceToken       String?  @map("device_token") @db.VarChar(255)
   deviceType        String?  @map("device_type") @db.VarChar(20)
   appVersion        String?  @map("app_version") @db.VarChar(20)
   organization      String?  @db.VarChar(100)
   state             String?  @db.VarChar(50)

   createdAt         DateTime @default(now()) @map("created_at")
   updatedAt         DateTime @default(now()) @updatedAt @map("updated_at")

   // Relationships
   userRole          Role?                @relation(fields: [role_id], references: [id])
   purchases         Purchase[]
   userProgress      UserProgress[]
   bookingsAsNurse   Booking[]            @relation("booking_nurse")
   bookingsAsMentor  Booking[]            @relation("booking_mentor")
   feedbackAsNurse   Feedback[]            @relation("feedback_nurse")
   feedbackAsMentor  Feedback[]            @relation("feedback_mentor")
   notifications     Notification[]
   payments          Payment[]
   adminLogs         AdminLog[]
   systemSettings    SystemSetting[]
   adminSessions     AdminSession[]
   mentorAvailability MentorAvailability[]
   earnings          MentorEarning[]
   applications      MentorApplication[]
   nccStatus         NCCStatus?
   favorites         Favorite[]
   appSessions       AppSession[]
   zoomSessions      ZoomSession[]
   createdCourses    Course[]             @relation("course_instructor")
   createdEvents     Event[]              @relation("event_instructor")
   createdConferences Conference[]
   createdWorkshops  Workshop[]           @relation("workshop_creator")
   createdNews       News[]               @relation("news_author")
   createdAssessments Assessment[]         @relation("assessment_creator")
   assessmentAttempts AssessmentAttempt[]
   catalogItems      CatalogItem[]
   zoomSessionsAsUser ZoomSession[] @relation("zoom_user")

   @@unique([email])
   @@unique([phoneNumber])
   @@map("users")
}

model Role {
   id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   name      String   @unique @db.VarChar(60)
   active    Boolean  @default(dbgenerated("b'1'")) @db.Bit(1)
   createdAt DateTime @default(now()) @map("created_at")
   updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

   users     User[]

   @@map("roles")
}


model Otp {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  otpCode   Int      @map("otp_code")
  userId    BigInt   @db.UnsignedBigInt @unique @map("user_id")
  verified  Boolean  @default(dbgenerated("b'0'")) @db.Bit(1)
  createdAt DateTime @default(now()) @map("created_at")
  expiresAt DateTime @map("expires_at")

  @@map("otp")
}

// Admin-specific models
model AdminLog {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  adminId     BigInt      @db.UnsignedBigInt @map("admin_id")
  action      String      @db.VarChar(100)
  resource    String      @db.VarChar(100)
  resourceId  BigInt?     @db.UnsignedBigInt @map("resource_id")
  details     String?     @db.Text
  ipAddress   String?     @map("ip_address") @db.VarChar(45)
  userAgent   String?     @map("user_agent") @db.Text
  createdAt   DateTime    @default(now()) @map("created_at")
  admin       User        @relation(fields: [adminId], references: [id])

  @@map("admin_logs")
}

model SystemSetting {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  key         String      @unique @db.VarChar(100)
  value       String      @db.Text
  type        String      @db.VarChar(20) // string, number, boolean, json
  category    String      @db.VarChar(50)
  description String?     @db.Text
  isPublic    Boolean     @default(false) @map("is_public")
  updatedBy   BigInt      @db.UnsignedBigInt @map("updated_by")
  createdAt   DateTime    @default(now()) @map("created_at")
  updatedAt   DateTime    @default(now()) @updatedAt @map("updated_at")
  admin       User        @relation(fields: [updatedBy], references: [id])

  @@map("system_settings")
}

model AdminSession {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  adminId     BigInt      @db.UnsignedBigInt @map("admin_id")
  token       String      @unique @db.VarChar(500)
  expiresAt   DateTime    @map("expires_at")
  ipAddress   String?     @map("ip_address") @db.VarChar(45)
  userAgent   String?     @map("user_agent") @db.Text
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")
  admin       User        @relation(fields: [adminId], references: [id])

  @@map("admin_sessions")
}

// Content models for admin management
model News {
  id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  title       String   @db.VarChar(255)
  content     String   @db.Text
  excerpt     String?  @db.Text
  category    String   @db.VarChar(50)
  featured    Boolean  @default(false)
  images      Json?
  videos      Json?
  tags        Json?
  type        String   @default("article") @db.VarChar(20)
  status      String   @default("draft") @db.VarChar(20)
  publishedAt DateTime? @map("published_at")
  authorId    BigInt?  @db.UnsignedBigInt @map("author_id")
  viewCount   Int      @default(0) @map("view_count")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  author      User?    @relation("news_author", fields: [authorId], references: [id])

  @@map("news")
}

model Lesson {
   id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   courseId    BigInt   @db.UnsignedBigInt @map("course_id")
   title       String   @db.VarChar(255)
   description String?  @db.Text
   content     String?  @db.Text
   videoUrl    String?  @db.VarChar(500)
   duration    Int?     @default(0) // in minutes
   order       Int      @default(0)
   isActive    Boolean  @default(true) @map("is_active")
   createdAt   DateTime @default(now()) @map("created_at")
   updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")

   course      Course   @relation(fields: [courseId], references: [id])
   progress    UserProgress[]

   @@map("lessons")
}

model Course {
   id             BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   title          String   @db.VarChar(255)
   description    String   @db.Text
   price          Float    @default(0)
   thumbnail      String?  @db.VarChar(500)
   lessons        Json?
   level          String?  @db.VarChar(20)
   category       String?  @db.VarChar(50)
   instructorId    BigInt?  @db.UnsignedBigInt @map("instructor_id")
   enrolledCount  Int      @default(0) @map("enrolled_count")
   enrollmentCount Int     @default(0) @map("enrollment_count")
   isActive       Boolean  @default(true) @map("is_active")
   createdAt      DateTime @default(now()) @map("created_at")
   updatedAt      DateTime @default(now()) @updatedAt @map("updated_at")
   instructor     User?    @relation("course_instructor", fields: [instructorId], references: [id])
   lessonsList    Lesson[]
   userProgress   UserProgress[]
   assessments    Assessment[]

   @@map("courses")
}

model Event {
   id              BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   title           String   @db.VarChar(255)
   description     String   @db.Text
   price           Float    @default(0)
   date            DateTime
   time            String?  @db.VarChar(20)
   duration        Int?     @default(60)
   venue           String   @db.VarChar(255)
   venueName       String?  @db.VarChar(255)
   venueAddress    String?  @db.VarChar(500)
   venueCity       String?  @db.VarChar(100)
   venueLat        Float?
   venueLng        Float?
   maxParticipants Int      @default(100)
   capacity        Int?     @default(100)
   registeredCount Int      @default(0) @map("registered_count")
   instructorId   BigInt?  @db.UnsignedBigInt @map("instructor_id")
   imageUrl        String?  @db.VarChar(500)
   status          String   @default("upcoming") @db.VarChar(20)
   createdAt       DateTime @default(now()) @map("created_at")
   updatedAt       DateTime @default(now()) @updatedAt @map("updated_at")
   instructor      User?    @relation("event_instructor", fields: [instructorId], references: [id])

   @@map("events")
}

model Workshop {
  id              BigInt           @id @default(autoincrement()) @db.UnsignedBigInt
  title           String           @db.VarChar(255)
  slug            String           @unique @db.VarChar(255)
  description     String           @db.Text
  coverImage      String?          @db.VarChar(500)
  isPublished     Boolean          @default(false) @map("is_published")
  startDate       DateTime         @map("start_date")
  endDate         DateTime         @map("end_date")
  tags            Json?
  metadata        Json?
  mentors         Json?
  createdBy       BigInt?          @db.UnsignedBigInt @map("created_by")
  createdAt       DateTime         @default(now()) @map("created_at")
  updatedAt       DateTime         @default(now()) @updatedAt @map("updated_at")
  creator         User?            @relation("workshop_creator", fields: [createdBy], references: [id])
  sessions        WorkshopSession[]

  @@map("workshops")
}

model Assessment {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  title     String   @db.VarChar(255)
  type      String   @db.VarChar(20) // course, ncc
  courseId  BigInt?  @db.UnsignedBigInt @map("course_id")
  questions Json?
  createdBy BigInt?  @db.UnsignedBigInt @map("created_by")
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
  creator   User?    @relation("assessment_creator", fields: [createdBy], references: [id])
  course    Course?  @relation(fields: [courseId], references: [id])
  attempts  AssessmentAttempt[]

  @@map("assessments")
}

// Shared models for users
model Purchase {
  id            BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId        BigInt   @db.UnsignedBigInt @map("user_id")
  courseId  BigInt?  @db.UnsignedBigInt @map("course_id")
  itemId        BigInt?  @db.UnsignedBigInt @map("item_id") // For conferences, events, workshops
  itemType      String?  @map("item_type") // course, conference, event, workshop
  amount        Float?
  paymentMethod String?  @db.VarChar(50)
  transactionId String?  @db.VarChar(255)
  isCompleted   Boolean  @default(false)
  status        String?  @db.VarChar(50)
  paymentId     String?  @db.VarChar(255)
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at")
  user          User     @relation(fields: [userId], references: [id])

  @@map("purchases")
}

model UserProgress {
   id        BigInt        @id @default(autoincrement()) @db.UnsignedBigInt
   userId    BigInt        @db.UnsignedBigInt @map("user_id")
   courseId    BigInt   @db.UnsignedBigInt @map("course_id")
   lessonId  BigInt        @db.UnsignedBigInt @map("lesson_id")
   progress  Float         @default(0)
   completed Boolean       @default(false)
   createdAt DateTime      @default(now()) @map("created_at")
   updatedAt DateTime      @default(now()) @updatedAt @map("updated_at")
   user      User          @relation(fields: [userId], references: [id])
   course    Course        @relation(fields: [courseId], references: [id])
   lesson    Lesson        @relation(fields: [lessonId], references: [id])

   @@unique([userId, courseId, lessonId])
   @@map("user_progress")
}

model Booking {
  id                     BigInt               @id @default(autoincrement()) @db.UnsignedBigInt
  nurseId                BigInt               @db.UnsignedBigInt @map("nurse_id")
  mentorId               BigInt               @db.UnsignedBigInt @map("mentor_id")
  mentorAvailabilityId   BigInt               @db.UnsignedBigInt @map("availability_slot_id")
  dateTime               DateTime             @map("date_time")
  duration               Int?
  sessionType            String?              @map("session_type") @db.VarChar(50)
  price                  Float?
  notes                  String?              @db.Text
  zoomLink               String?              @map("zoom_link") @db.VarChar(255)
  status                 String               @default("pending") @db.VarChar(20)
  createdAt              DateTime             @default(now()) @map("created_at")
  updatedAt              DateTime             @default(now()) @updatedAt @map("updated_at")
  nurse                  User                 @relation("booking_nurse", fields: [nurseId], references: [id])
  mentor                 User                 @relation("booking_mentor", fields: [mentorId], references: [id])
  mentorAvailability     MentorAvailability   @relation(fields: [mentorAvailabilityId], references: [id])
  catalogItem            CatalogItem?          @relation(fields: [catalogItemId], references: [id])
  catalogItemId          BigInt?              @db.UnsignedBigInt @map("catalog_item_id")
  feedbacks              Feedback[]
  earnings               MentorEarning[]
  zoomSessions           ZoomSession[]

  @@index([mentorAvailabilityId])
  @@index([mentorId])
  @@map("bookings")
}

model Feedback {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  nurseId   BigInt   @db.UnsignedBigInt @map("nurse_id")
  mentorId  BigInt   @db.UnsignedBigInt @map("mentor_id")
  bookingId BigInt   @db.UnsignedBigInt @map("booking_id")
  rating    Int
  comment   String?  @db.Text
  comments  String?  @db.Text
  skills    Json?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
  nurse     User     @relation("feedback_nurse", fields: [nurseId], references: [id])
  mentor    User     @relation("feedback_mentor", fields: [mentorId], references: [id])
  booking   Booking  @relation(fields: [bookingId], references: [id])

  @@index([bookingId])
  @@index([mentorId])
  @@map("feedback")
}

model Notification {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId    BigInt   @db.UnsignedBigInt @map("user_id")
  title     String   @db.VarChar(255)
  message   String   @db.Text
  type      String   @db.VarChar(50)
  isRead    Boolean  @default(false) @map("is_read")
  pushSent  Boolean  @default(false) @map("push_sent")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])

  @@map("notifications")
}

model Payment {
  id            BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId        BigInt   @db.UnsignedBigInt @map("user_id")
  amount        Float
  paymentMethod String?  @map("payment_method") @db.VarChar(50)
  transactionId String?  @unique @map("transaction_id") @db.VarChar(255)
  paymentId     String   @map("payment_id") @db.VarChar(255)
  orderId       String?  @map("order_id") @db.VarChar(255)
  status        String   @default("pending") @db.VarChar(20)
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at")
  user          User     @relation(fields: [userId], references: [id])

  @@map("payments")
}

// Mentor-specific models (shared)
model MentorAvailability {
  id                BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  mentorId          BigInt      @db.UnsignedBigInt @map("mentor_id")
  date              DateTime
  startDateTime     DateTime    @map("start_time")
  endDateTime       DateTime    @map("end_time")
  isBooked          Boolean     @default(false) @map("is_booked")
  createdAt         DateTime    @default(now()) @map("created_at")
  updatedAt         DateTime    @default(now()) @updatedAt @map("updated_at")
  currentBookings   Int         @default(0) @map("current_bookings")
  isActive          Boolean     @default(true) @map("is_active")
  maxBookings       Int?        @map("max_bookings")
  meetingLink       String?     @map("meeting_link") @db.VarChar(500)
  price             Float?
  title             String?     @db.VarChar(255)
  description       String?     @db.Text
  duration          Int?
  sessionType       String?     @db.VarChar(50)
  meetingType       String?     @db.VarChar(50)
  specializations    Json?
  mentor            User        @relation(fields: [mentorId], references: [id])
  bookings           Booking[]

  @@index([mentorId])
  @@map("mentor_availability")
}

model ZoomSession {
   id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   meetingId String   @db.VarChar(255)
   topic     String   @db.VarChar(255)
   startTime DateTime @map("start_time")
   duration  Int
   joinUrl   String   @db.VarChar(500)
   password  String   @db.VarChar(50)
   userId    BigInt?  @db.UnsignedBigInt @map("user_id")
   mentorId  BigInt   @db.UnsignedBigInt @map("mentor_id")
   bookingId BigInt   @db.UnsignedBigInt @map("booking_id")
   zoomId    String?  @map("zoom_id") @db.VarChar(100)
   status    String   @default("scheduled") @db.VarChar(20)
   createdAt DateTime @default(now()) @map("created_at")
   updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
   mentor    User     @relation(fields: [mentorId], references: [id])
   booking   Booking  @relation(fields: [bookingId], references: [id])
   user      User?    @relation("zoom_user", fields: [userId], references: [id])

   @@index([bookingId])
   @@index([mentorId])
   @@map("zoom_sessions")
}

model MentorEarning {
  id            BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  mentorId      BigInt      @db.UnsignedBigInt @map("mentor_id")
  bookingId     BigInt      @db.UnsignedBigInt @map("booking_id")
  amount        Float
  platformFee   Float       @map("platform_fee")
  netAmount     Float       @map("net_amount")
  status        String      @default("pending") @db.VarChar(20)
  payoutDate    DateTime?   @map("payout_date")
  createdAt     DateTime    @default(now()) @map("created_at")
  updatedAt     DateTime    @default(now()) @updatedAt @map("updated_at")
  mentor        User        @relation(fields: [mentorId], references: [id])
  booking       Booking     @relation(fields: [bookingId], references: [id])

  @@map("mentor_earnings")
}

model MentorApplication {
  id              BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  mentorId        BigInt      @db.UnsignedBigInt @unique @map("mentor_id")
  status          String      @default("pending") @db.VarChar(20)
  submittedAt     DateTime    @default(now()) @map("submitted_at")
  reviewedAt      DateTime?   @map("reviewed_at")
  reviewedBy      BigInt?     @map("reviewed_by")
  reviewNotes     String?     @db.Text @map("review_notes")
  documents       Json?
  createdAt       DateTime    @default(now()) @map("created_at")
  updatedAt       DateTime    @default(now()) @updatedAt @map("updated_at")
  mentor          User        @relation(fields: [mentorId], references: [id])

  @@map("mentor_applications")
}

// App-specific models (shared)
model NCCStatus {
  id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId      BigInt   @db.UnsignedBigInt @unique @map("user_id")
  status      String   @db.VarChar(50)
  description String?  @db.Text
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
  details     String?  @db.Text
  user        User     @relation(fields: [userId], references: [id])

  @@map("ncc_status")
}

model Favorite {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  userId    BigInt   @db.UnsignedBigInt @map("user_id")
  mentorId  BigInt   @db.UnsignedBigInt @map("mentor_id")
  createdAt DateTime @default(now()) @map("created_at")
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, mentorId])
  @@map("favorites")
}

model AppSession {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  userId      BigInt      @db.UnsignedBigInt @map("user_id")
  deviceId    String      @map("device_id") @db.VarChar(100)
  token       String      @unique @db.VarChar(500)
  expiresAt   DateTime    @map("expires_at")
  ipAddress   String?     @map("ip_address") @db.VarChar(45)
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")
  user        User        @relation(fields: [userId], references: [id])

  @@map("app_sessions")
}

model AppUpdate {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  version     String      @unique @db.VarChar(20)
  platform    String      @db.VarChar(10) // ios, android
  isRequired  Boolean     @default(false) @map("is_required")
  title       String      @db.VarChar(255)
  description String      @db.Text
  downloadUrl String      @map("download_url") @db.VarChar(500)
  releaseDate DateTime    @map("release_date")
  isActive    Boolean     @default(true) @map("is_active")
  createdAt   DateTime    @default(now()) @map("created_at")
  updatedAt   DateTime    @default(now()) @updatedAt @map("updated_at")

  @@map("app_updates")
}

// Additional models for services
model CatalogItem {
   id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   name        String   @db.VarChar(255)
   title       String?  @db.VarChar(255)
   description String?  @db.Text
   price       Float    @default(0)
   category    String?  @db.VarChar(50)
   imageUrl    String?  @db.VarChar(500)
   type        String?  @db.VarChar(50)
   schedule    DateTime?
   creatorId   BigInt?  @db.UnsignedBigInt @map("creator_id")
   createdBy   BigInt?  @db.UnsignedBigInt @map("created_by")
   isActive    Boolean  @default(true) @map("is_active")
   createdAt   DateTime @default(now()) @map("created_at")
   updatedAt   DateTime @default(now()) @updatedAt @map("updated_at")
   creator     User?    @relation(fields: [creatorId], references: [id])
   bookings    Booking[]

   @@map("catalog_items")
}

model Conference {
   id              BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
   title           String   @db.VarChar(255)
   description     String   @db.Text
   price           Float    @default(0)
   date            DateTime
   time            String?  @db.VarChar(20)
   duration        Int?     @default(60)
   venue           String   @db.VarChar(255)
   speaker         String?  @db.VarChar(100)
   capacity        Int      @default(100)
   imageUrl        String?  @db.VarChar(500)
   thumbnail       String?  @db.VarChar(500)
   status          String   @default("upcoming") @db.VarChar(20)
   isActive        Boolean  @default(true) @map("is_active")
   registeredCount Int      @default(0) @map("registered_count")
   instructorId    BigInt?  @db.UnsignedBigInt @map("instructor_id")
   videoUrl        String?  @db.VarChar(500)
   createdAt       DateTime @default(now()) @map("created_at")
   updatedAt       DateTime @default(now()) @updatedAt @map("updated_at")

   instructor      User?    @relation(fields: [instructorId], references: [id])

   @@map("conferences")
}

model AssessmentAttempt {
  id            BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  assessmentId  BigInt      @db.UnsignedBigInt @map("assessment_id")
  userId        BigInt      @db.UnsignedBigInt @map("user_id")
  answers       Json?
  score         Float       @default(0)
  passed        Boolean     @default(false)
  submittedAt   DateTime    @default(now()) @map("submitted_at")
  createdAt     DateTime    @default(now()) @map("created_at")
  updatedAt     DateTime    @default(now()) @updatedAt @map("updated_at")
  assessment    Assessment  @relation(fields: [assessmentId], references: [id])
  user          User        @relation(fields: [userId], references: [id])

  @@unique([assessmentId, userId])
  @@map("assessment_attempts")
}

model WorkshopSession {
   id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
   workshopId  BigInt      @db.UnsignedBigInt @map("workshop_id")
   title       String      @db.VarChar(255)
   description String?     @db.Text
   startTime   DateTime    @map("start_time")
   endTime     DateTime?   @map("end_time")
   startsAt    DateTime?   @map("starts_at")
   endsAt      DateTime?   @map("ends_at")
   speaker     String?     @db.VarChar(100)
   capacity    Int         @default(50)
   sessionType String?     @db.VarChar(50)
   mentors     Json?
   isActive    Boolean     @default(true) @map("is_active")
   createdAt   DateTime    @default(now()) @map("created_at")
   updatedAt   DateTime    @default(now()) @updatedAt @map("updated_at")
   workshop    Workshop    @relation(fields: [workshopId], references: [id])

   @@map("workshop_sessions")
}
